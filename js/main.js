"use strict";

function _createForOfIteratorHelper(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (!t) { if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var _n = 0, F = function F() {}; return { s: F, n: function n() { return _n >= r.length ? { done: !0 } : { done: !1, value: r[_n++] }; }, e: function e(r) { throw r; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var o, a = !0, u = !1; return { s: function s() { t = t.call(r); }, n: function n() { var r = t.next(); return a = r.done, r; }, e: function e(r) { u = !0, o = r; }, f: function f() { try { a || null == t["return"] || t["return"](); } finally { if (u) throw o; } } }; }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
var btnTry = document.querySelector('[data-id="btn_try"]');
var btnGo = document.querySelector('[data-id="btn_go"]');
var btnAgain = document.querySelector('[data-id="btn_again"]');
var hatches = document.querySelectorAll('[data-id="hatch"]');
var cars = document.querySelectorAll('[data-id="car"]');
var carKill = document.querySelector('[data-id="car_kill"]');
var chickenTooltip = document.querySelector('[data-id="tooltip"]');
var chicken = document.querySelector('[data-id="chicken"]');
var game = document.querySelector('[data-id="game"]');
var popup = document.querySelector('[data-id="popup"]');
var currentPosition = 42.5;
var tryTimes = 0;
var times = 0;
var step = 122.5;
var chickenMove = function chickenMove() {
  if (tryTimes === 1 && times === 4) return;
  var hatch = hatches[times];
  var percent = hatch.children[2].textContent;
  chickenTooltip.textContent = percent;
  times += 1;
  console.log(times);
  if (tryTimes === 1 && times === 4) {
    carKill.classList.add('active');
    setTimeout(function () {
      chicken.children[0].classList.remove('active');
      chicken.children[1].classList.add('active');
    }, 250);
    setTimeout(function () {
      btnAgain.classList.add('active');
      btnGo.classList.remove('active');
    }, 650);
  }
  if (times === 7) {
    currentPosition += 217.5;
    chicken.style.left = "".concat(currentPosition, "px");
    game.style.left = "-".concat(740, "px");
    setTimeout(function () {
      var hatch = hatches[6];
      hatch.children[0].classList.remove('active');
      hatch.children[1].classList.add('active');
      hatch.children[2].style.display = 'none';
      chickenTooltip.style.display = 'none';
    }, 250);
    setTimeout(function () {
      popup.style.display = 'flex';
    }, 1000);
    return;
  }
  currentPosition += step;
  chicken.style.left = "".concat(currentPosition, "px");
  game.style.left = "-".concat(currentPosition - 80, "px");
  if (times > 1 && 7 > times) {
    cars[times - 2].classList.add('active');
  }
};
btnTry.addEventListener('click', function () {
  btnGo.classList.add('active');
  btnTry.classList.remove('active');
  tryTimes += 1;
  chickenMove();
  setTimeout(function () {
    chickenTooltip.classList.add('active');
  }, 200);
});
btnGo.addEventListener('click', function () {
  btnGo.classList.add('active');
  btnTry.classList.remove('active');
  chickenMove();
  setTimeout(function () {
    var hatch = hatches[times - 2];
    hatch.children[0].classList.remove('active');
    hatch.children[1].classList.add('active');
    hatch.children[2].style.display = 'none';
  }, 100);
});
btnAgain.addEventListener('click', function () {
  if (times === 0) return;
  currentPosition = 42.5;
  times = 0;
  chicken.style.left = "".concat(currentPosition, "px");
  game.style.left = 0;
  btnAgain.classList.remove('active');
  chickenTooltip.classList.remove('active');
  setTimeout(function () {
    btnAgain.classList.remove('active');
    chickenTooltip.classList.remove('active');
    btnTry.classList.add('active');
  }, 200);
  var _iterator = _createForOfIteratorHelper(hatches),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var hatch = _step.value;
      hatch.children[0].classList.add('active');
      hatch.children[1].classList.remove('active');
      hatch.children[2].style.display = 'flex';
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  var _iterator2 = _createForOfIteratorHelper(cars),
    _step2;
  try {
    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {
      var car = _step2.value;
      car.classList.remove('active');
    }
  } catch (err) {
    _iterator2.e(err);
  } finally {
    _iterator2.f();
  }
  carKill.classList.remove('active');
  chicken.children[1].classList.remove('active');
  chicken.children[0].classList.add('active');
});
"use strict";
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzZWNvbmQuanMiXSwibmFtZXMiOlsiYnRuVHJ5IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYnRuR28iLCJidG5BZ2FpbiIsImhhdGNoZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2FycyIsImNhcktpbGwiLCJjaGlja2VuVG9vbHRpcCIsImNoaWNrZW4iLCJnYW1lIiwicG9wdXAiLCJjdXJyZW50UG9zaXRpb24iLCJ0cnlUaW1lcyIsInRpbWVzIiwic3RlcCIsImNoaWNrZW5Nb3ZlIiwiaGF0Y2giLCJwZXJjZW50IiwiY2hpbGRyZW4iLCJ0ZXh0Q29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRUaW1lb3V0IiwicmVtb3ZlIiwic3R5bGUiLCJsZWZ0IiwiY29uY2F0IiwiZGlzcGxheSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaXRlcmF0b3IiLCJfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciIsIl9zdGVwIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJlcnIiLCJlIiwiZiIsIl9pdGVyYXRvcjIiLCJfc3RlcDIiLCJjYXIiXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTUEsTUFBTSxHQUFHQyxRQUFRLENBQUNDLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQztBQUM1RCxJQUFNQyxLQUFLLEdBQUdGLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLG9CQUFvQixDQUFDO0FBQzFELElBQU1FLFFBQVEsR0FBR0gsUUFBUSxDQUFDQyxhQUFhLENBQUMsdUJBQXVCLENBQUM7QUFDaEUsSUFBTUcsT0FBTyxHQUFHSixRQUFRLENBQUNLLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDO0FBQzlELElBQU1DLElBQUksR0FBR04sUUFBUSxDQUFDSyxnQkFBZ0IsQ0FBQyxpQkFBaUIsQ0FBQztBQUN6RCxJQUFNRSxPQUFPLEdBQUdQLFFBQVEsQ0FBQ0MsYUFBYSxDQUFDLHNCQUFzQixDQUFDO0FBQzlELElBQU1PLGNBQWMsR0FB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SyxDQUFDRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNJLFNBQVMsQ0FBQ0csTUFBTSxDQUFDLFFBQVEsQ0FBQztNQUM1Q1QsS0FBSyxDQUFDRSxRQUFRLENBQUMsQ0FBQyxDQUFDLENBQUNRLEtBQUssQ0FBQ0csT0FBTyxHQUFHLE1BQU07SUFDNUM7RUFBQyxTQUFBUyxHQUFBO0lBQUFQLFNBQUEsQ0FBQVEsQ0FBQSxDQUFBRCxHQUFBO0VBQUE7SUFBQVAsU0FBQSxDQUFBUyxDQUFBO0VBQUE7RUFBQSxJQUFBQyxVQUFBLEdBQUFULDBCQUFBLENBRWMzQixJQUFJO0lBQUFxQyxNQUFBO0VBQUE7SUFBbkIsS0FBQUQsVUFBQSxDQUFBUCxDQUFBLE1BQUFRLE1BQUEsR0FBQUQsVUFBQSxDQUFBTixDQUFBLElBQUFDLElBQUEsR0FBb0I7TUFBQSxJQUFaTyxHQUFHLEdBQUFELE1BQUEsQ0FBQUwsS0FBQTtNQUNQTSxHQUFHLENBQUNyQixTQUFTLENBQUNHLE1BQU0sQ0FBQyxRQUFRLENBQUM7SUFDbEM7RUFBQyxTQUFBYSxHQUFBO0lBQUFHLFVBQUEsQ0FBQUYsQ0FBQSxDQUFBRCxHQUFBO0VBQUE7SUFBQUcsVUFBQSxDQUFBRCxDQUFBO0VBQUE7RUFDRGxDLE9BQU8sQ0FBQ2dCLFNBQVMsQ0FBQ0csTUFBTSxDQUFDLFFBQVEsQ0FBQztFQUNsQ2pCLE9BQU8sQ0FBQ1UsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDSSxTQUFTLENBQUNHLE1BQU0sQ0FBQyxRQUFRLENBQUM7RUFDOUNqQixPQUFPLENBQUNVLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQ0ksU0FBUyxDQUFDQyxHQUFHLENBQUMsUUFBUSxDQUFDO0FBRS9DLENBQUMsQ0FBQztBQ3JJRiIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYnRuVHJ5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJidG5fdHJ5XCJdJyk7XHJcbmNvbnN0IGJ0bkdvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJidG5fZ29cIl0nKTtcclxuY29uc3QgYnRuQWdhaW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cImJ0bl9hZ2FpblwiXScpO1xyXG5jb25zdCBoYXRjaGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJoYXRjaFwiXScpO1xyXG5jb25zdCBjYXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaWQ9XCJjYXJcIl0nKTtcclxuY29uc3QgY2FyS2lsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiY2FyX2tpbGxcIl0nKTtcclxuY29uc3QgY2hpY2tlblRvb2x0aXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1pZD1cInRvb2x0aXBcIl0nKTtcclxuY29uc3QgY2hpY2tlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWlkPVwiY2hpY2tlblwiXScpO1xyXG5jb25zdCBnYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJnYW1lXCJdJyk7XHJcbmNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaWQ9XCJwb3B1cFwiXScpO1xyXG5cclxuXHJcblxyXG5sZXQgY3VycmVudFBvc2l0aW9uID0gNDIuNTtcclxubGV0IHRyeVRpbWVzID0gMDtcclxubGV0IHRpbWVzID0gMDtcclxubGV0IHN0ZXAgPSAxMjIuNTtcclxuXHJcblxyXG5jb25zdCBjaGlja2VuTW92ZSA9ICgpPT57XHJcblxyXG4gICAgaWYodHJ5VGltZXM9PT0gMSAmJiB0aW1lcyA9PT0gNCkgcmV0dXJuXHJcblxyXG4gICAgY29uc3QgaGF0Y2ggPSBoYXRjaGVzW3RpbWVzXTtcclxuICAgIGNvbnN0IHBlcmNlbnQgPSBoYXRjaC5jaGlsZHJlblsyXS50ZXh0Q29udGVudDtcclxuICAgIGNoaWNrZW5Ub29sdGlwLnRleHRDb250ZW50ID0gcGVyY2VudDtcclxuICAgIFxyXG4gICAgdGltZXMgKz0gMTtcclxuICAgIGNvbnNvbGUubG9nKHRpbWVzKVxyXG5cclxuICAgIGlmKHRyeVRpbWVzPT09IDEgJiYgdGltZXMgPT09IDQpe1xyXG4gICAgICAgIGNhcktpbGwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIGNoaWNrZW4uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgY2hpY2tlbi5jaGlsZHJlblsxXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgIH0sMjUwKVxyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgYnRuQWdhaW4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICAgICAgYnRuR28uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9LDY1MClcclxuICAgIH1cclxuXHJcbiAgICBpZih0aW1lcyA9PT0gNyl7XHJcbiAgICAgICAgY3VycmVudFBvc2l0aW9uICs9IDIxNy41OyBcclxuICAgICAgICBjaGlja2VuLnN0eWxlLmxlZnQgPSBgJHtjdXJyZW50UG9zaXRpb259cHhgO1xyXG4gICAgICAgIGdhbWUuc3R5bGUubGVmdCA9IGAtJHs3NDB9cHhgO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdGNoID0gaGF0Y2hlc1s2XTtcclxuICAgICAgICAgICAgaGF0Y2guY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgaGF0Y2guY2hpbGRyZW5bMV0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICAgICAgaGF0Y2guY2hpbGRyZW5bMl0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgICBjaGlja2VuVG9vbHRpcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfSwyNTApXHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoKCk9PntcclxuICAgICAgICAgICAgcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG4gICAgICAgIH0sMTAwMClcclxuICAgICAgICBcclxuXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcblxyXG4gICAgY3VycmVudFBvc2l0aW9uICs9IHN0ZXA7IFxyXG4gICAgY2hpY2tlbi5zdHlsZS5sZWZ0ID0gYCR7Y3VycmVudFBvc2l0aW9ufXB4YDtcclxuICAgIGdhbWUuc3R5bGUubGVmdCA9IGAtJHtjdXJyZW50UG9zaXRpb24tODB9cHhgO1xyXG5cclxuICAgIFxyXG5cclxuICAgIGlmKHRpbWVzID4gMSAmJiA3ID4gdGltZXMpe1xyXG4gICAgICAgIGNhcnNbdGltZXMgLSAyXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgfVxyXG5cclxuICAgIFxyXG5cclxuICAgIFxyXG59O1xyXG5cclxuYnRuVHJ5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG5cclxuICAgIGJ0bkdvLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICBidG5UcnkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIFxyXG4gICAgdHJ5VGltZXMgKz0gMTtcclxuICAgIGNoaWNrZW5Nb3ZlKCk7XHJcblxyXG4gICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgIGNoaWNrZW5Ub29sdGlwLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICB9LDIwMClcclxufSk7XHJcblxyXG5idG5Hby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgIGJ0bkdvLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICBidG5UcnkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIGNoaWNrZW5Nb3ZlKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpPT57XHJcbiAgICAgICAgY29uc3QgaGF0Y2ggPSBoYXRjaGVzW3RpbWVzIC0gMl07XHJcbiAgICAgICAgaGF0Y2guY2hpbGRyZW5bMF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICBoYXRjaC5jaGlsZHJlblsxXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgIGhhdGNoLmNoaWxkcmVuWzJdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgIH0sMTAwKVxyXG59KTtcclxuXHJcbmJ0bkFnYWluLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgXHJcbiAgICBpZih0aW1lcyA9PT0gMCkgcmV0dXJuXHJcblxyXG4gICAgY3VycmVudFBvc2l0aW9uID0gNDIuNTtcclxuICAgIHRpbWVzID0gMDtcclxuICAgIGNoaWNrZW4uc3R5bGUubGVmdCA9IGAke2N1cnJlbnRQb3NpdGlvbn1weGA7XHJcbiAgICBnYW1lLnN0eWxlLmxlZnQgPSAwO1xyXG4gICAgYnRuQWdhaW4uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIGNoaWNrZW5Ub29sdGlwLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcblxyXG4gICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgIGJ0bkFnYWluLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgY2hpY2tlblRvb2x0aXAuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICBidG5UcnkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgIH0sMjAwKVxyXG5cclxuICAgIGZvcihsZXQgaGF0Y2ggb2YgaGF0Y2hlcyl7XHJcbiAgICAgICAgaGF0Y2guY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICBoYXRjaC5jaGlsZHJlblsxXS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgIGhhdGNoLmNoaWxkcmVuWzJdLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcclxuICAgIH1cclxuXHJcbiAgICBmb3IobGV0IGNhciBvZiBjYXJzKXtcclxuICAgICAgICBjYXIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIH1cclxuICAgIGNhcktpbGwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIGNoaWNrZW4uY2hpbGRyZW5bMV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgIGNoaWNrZW4uY2hpbGRyZW5bMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgIFxyXG59KTtcclxuIiwiIl19
